<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="Cache-Control" content="no-cache, must-revalidate">
	<meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT">
    <meta name="viewport" content="width=device-width">
	<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<style>

		body{
			background-color:gray;
		}
		svg{
			margin:50px;
			border:2px #cccccc;
			background-color:white;
		}
 
		.links line {
		  stroke: #999;
		  stroke-opacity: 0.7;
		}

		.nodes circle {
		  stroke: #fff;
		  stroke-width: 0.2px;
		}

	</style> 
	</head>
	<body>
		<h1>div0</h1><div id="div0"></div>
		<div id="div1"><h1>div1</h1></div>
		<div id="div2"><h1>div2</h1></div>
		<div id="div3"><h1>div3</h1></div>
		<div id="div4"><h1>div4</h1></div>
		<div id="div5"><h1>div5</h1></div>
		<div id="div6"><h1>div6</h1></div>
		<div id="div7"><h1>div7</h1></div>
		<div id="div8"><h1>div8</h1></div>
		<div id="div9"><h1>div9</h1></div>
	    <div id="div10"><h1>div10</h1></div>
		<div id="div11"><h1>div11</h1></div>	
		<div id="div12"><h1>div12</h1></div>
		<div id="div13"><h1>div13</h1></div>
		<div id="div14"><h1>div14</h1></div>
		<div id="div15"><h1>div15</h1></div>
		<div id="div16"><h1>div16</h1></div>
		<div id="div17"><h1>div17</h1></div>
		<div id="div18"><h1>div18</h1></div>
		<div id="div19"><h1>div19</h1></div>
	    <div id="div20"><h1>div20</h1></div>
		<div id="div21"><h1>div21</h1></div>
		<div id="div22"><h1>div22</h1></div>
		<div id="div23"><h1>div23</h1></div>
		<div id="div24"><h1>div24</h1></div>
		<div id="div25"><h1>div25</h1></div>
		<div id="div26"><h1>div26</h1></div>
		<div id="div27"><h1>div27</h1></div>
		<div id="div28"><h1>div28</h1></div>
		<div id="div29"><h1>div29</h1></div>
	    <div id="div30"><h1>div30</h1></div>
		<div id="div31"><h1>div31</h1></div>
		<div id="div32"><h1>div32</h1></div>
		<div id="div33"><h1>div33</h1></div>
		<div id="div34"><h1>div34</h1></div>
		<div id="div35"><h1>div35</h1></div>
		<div id="div36"><h1>div36</h1></div>
		<div id="div37"><h1>div37</h1></div>
		<div id="div38"><h1>div38</h1></div>
		<div id="div39"><h1>div39</h1></div>
	    <div id="div40"><h1>div40</h1></div>
		<div id="div41"><h1>div41</h1></div>
		<div id="div42"><h1>div42</h1></div>
		<div id="div43"><h1>div43</h1></div>
		<div id="div44"><h1>div44</h1></div>
		<div id="div45"><h1>div45</h1></div>
		<div id="div46"><h1>div46</h1></div>
		<div id="div47"><h1>div47</h1></div>
		<div id="div48"><h1>div48</h1></div>
		<div id="div49"><h1>div49</h1></div>
	    <div id="div50"><h1>div50</h1></div>	
		<div id="div51"><h1>div51</h1></div>	
		<div id="div52"><h1>div52</h1></div>
		<div id="div53"><h1>div53</h1></div>
		<div id="div54"><h1>div54</h1></div>
		<div id="div55"><h1>div55</h1></div>
		<div id="div56"><h1>div56</h1></div>
		<div id="div57"><h1>div57</h1></div>
		<div id="div58"><h1>div58</h1></div>
		<div id="div59"><h1>div59</h1></div>
	    <div id="div60"><h1>div60</h1></div>	
		<div id="div61"><h1>div61</h1></div>	
		<div id="div62"><h1>div62</h1></div>
		<div id="div63"><h1>div63</h1></div>
		<div id="div64"><h1>div64</h1></div>
		<div id="div65"><h1>div65</h1></div>
		<div id="div66"><h1>div66</h1></div>
		<div id="div67"><h1>div67</h1></div>
		<div id="div68"><h1>div68</h1></div>
		<div id="div69"><h1>div69</h1></div>
		<div id="div60"><h1>div60</h1></div>	
		<div id="div61"><h1>div61</h1></div>	
		<div id="div62"><h1>div62</h1></div>
		<div id="div63"><h1>div63</h1></div>
		<div id="div64"><h1>div64</h1></div>
		<div id="div65"><h1>div65</h1></div>
		<div id="div66"><h1>div66</h1></div>
		<div id="div67"><h1>div67</h1></div>
		<div id="div68"><h1>div68</h1></div>
		<div id="div69"><h1>div69</h1></div>
		<div id="div70"><h1>div70</h1></div>	
		<div id="div71"><h1>div71</h1></div>	
		<div id="div72"><h1>div72</h1></div>
		<div id="div73"><h1>div73</h1></div>
		<div id="div74"><h1>div74</h1></div>
		<div id="div75"><h1>div75</h1></div>
		<div id="div76"><h1>div76</h1></div>
		<div id="div77"><h1>div77</h1></div>
		<div id="div78"><h1>div78</h1></div>
		<div id="div79"><h1>div79</h1></div>
		<div id="div80"><h1>div80</h1></div>	
		<div id="div81"><h1>div81</h1></div>	
		<div id="div82"><h1>div82</h1></div>
		<div id="div83"><h1>div83</h1></div>
		<div id="div84"><h1>div84</h1></div>
		<div id="div85"><h1>div85</h1></div>
		<div id="div86"><h1>div86</h1></div>
		<div id="div87"><h1>div87</h1></div>
		<div id="div88"><h1>div88</h1></div>
		<div id="div89"><h1>div89</h1></div>
		<div id="div90"><h1>div90</h1></div>	
		<div id="div91"><h1>div91</h1></div>	
		<div id="div92"><h1>div92</h1></div>
		<div id="div93"><h1>div93</h1></div>
		<div id="div94"><h1>div94</h1></div>
		<div id="div95"><h1>div95</h1></div>
		<div id="div96"><h1>div96</h1></div>
		<div id="div97"><h1>div97</h1></div>
		<div id="div98"><h1>div98</h1></div>
		<div id="div99"><h1>div99</h1></div>
		<div id="div100"><h1>div100</h1></div>	
		<div id="div101"><h1>div101</h1></div>	
		<div id="div102"><h1>div102</h1></div>
		<div id="div103"><h1>div103</h1></div>
		<div id="div104"><h1>div104</h1></div>
		<div id="div105"><h1>div105</h1></div>
		<div id="div106"><h1>div106</h1></div>
		<div id="div107"><h1>div107</h1></div>
		<div id="div108"><h1>div108</h1></div>
		<div id="div109"><h1>div109</h1></div>
		<div id="div110"><h1>div110</h1></div>
		<div id="div111"><h1>div111</h1></div>
	</body>
	
	<script>		   
 
		var filename = "simple5.txt"
		var time = 2
		
		var i = 0;
		
		for(var i = 0; i < time; i++){
		
			draw(filename,time,i);
			
		}
			

		function draw(filename,time,index) {
 
		$.getJSON("dump_"+filename+"_end_layout_second_"+time+".json?random="+new Date().getTime(), "", function(json) {	
			// svg 的大小  
			var svgWidth = 1000;  
			var svgHight = 1000;  
			var padding =  0;  
		  
			// 数据点  
 
			// 创建SVG  
			var svg = d3.select('#div'+index)  
			  .append('svg')  
				.attr('width', svgWidth)  
				.attr('height', svgHight);  
		  
			// 设置标题  
			svg.append('text')  
			  .attr('x', svgWidth / 2 - 120)  
			  .attr('y', 30)  
			  .attr('class', 'title')  
			  .text('这是一个用d3画的简略坐标轴');  
		  
			// 创建比例尺  
			var xScale = d3.scale.linear()  
			  .domain([-50,50]).range([0,1000]);
		  
			var yScale = d3.scale.linear()  
			  .domain([-50,50]).range([1000,0]);
		 
			var rScale = d3.scale.linear()  
			  .domain([0, d3.max(json.nodes, function(d) {  
				return d.cy;  
			  })]).range([2, 4]);  
		  
			// 设置散点的坐标, 半径  
			svg.selectAll('circle')  
				.data(json.nodes)  
			  .enter()  
			  .append('circle')  
				.attr('cx', function(d) {  
				  return xScale(d.cx);  
				})  
				.attr('cy', function(d) {  
				  return yScale(d.cy);  
				})  
				 
				.attr("fill","#6495ed")
				.attr("origin", function(d) {  
					return d.cx+","+d.cy;
				})
				.attr('r', function(d) {  
				  if(d.value === 0||d.value/2===0)return 2;//rScale(d.cy);  
				  else return d.value/2;
				}); 



			svg.selectAll('line')
				.data(json.links)
				.enter()
				.append('line')
					.attr('x1',function(d){
						 
						return xScale(d.x1);
					})
					.attr('y1',function(d){
						return yScale(d.y1);
					})
					.attr('x2',function(d){
						return xScale(d.x2);
					})
					.attr('y2',function(d){
						return yScale(d.y2);
					})
					.attr("stroke","gray")
					.attr('stroke-width', function(d) { 
						return 0.2; 
					});
			 
			//// 设置文本  
			//svg.selectAll('text')  
			//	.data(json.nodes)  
			//  .enter()  
			//  .append('text')  
			//	.text(function(d) {  
			//	  return '(' + d.cx + ', ' + d.cy + ')';  
			//	})  
			//	.attr('x', function(d) {  
		    //
			//	  // 设置偏移量，让文本位于上方  
			//	  return xScale(d.cx) - 20;  
			//	})  
			//	.attr('y', function(d) {  
			//	  return yScale(d.cy) - 10;  
			//	})  
			//	.attr('font-family', 'Microsoft YaHei')  
			//	.attr('font-size', '12px')  
			//	.attr('fill', '#9400D3');  
		    //
			// 设置精度和样式  
			var formatPrecision = d3.format('');  
		  
			// 定义X轴  
			var xAxis = d3.svg.axis()  
			  .scale(xScale)  
		  
			  // 粗略的设置刻度线的数量，包括原点  
			  .ticks(11)  
			  .orient('bottom')  
		  
			  // 设置刻度格式  
			  .tickFormat(formatPrecision);
			  
		  
		  
			// 定义Y轴  
			var yAxis = d3.svg.axis()  
			  .scale(yScale)  
			  .orient('left')  
			  .ticks(11)  
			  .tickFormat(formatPrecision);
			  
		  
		  
			// 创建X轴, svg中： g元素是一个分组元素  
			svg.append('g')  
			  .attr('class', 'axis')  
		  
			  // 设置据下边界的距离  
			  .attr("transform","translate(0,"+0.5*svgHight+")")
			  .call(xAxis);  
		  
			// 创建Y轴  
			svg.append('g')  
			  .attr('class', 'axis')  
		  
			  // Y轴离左边界的距离  
			  .attr("transform","translate("+0.5*svgWidth+",0)")
			  .call(yAxis);  

			})
		}
	</script>  
	
	
	<script type="text/javascript"> 

	/**	  

						
	d3.csv("nodes10.csv",function(error,csvdata){  
		var width=2000;  
		var height=2000;  

		var padding={left:30, right:30, top:30, bottom:30};  
		var svg=d3.select("body")  
					.append("svg")  
					.attr("width",width)  
					.attr("height",height);  
		var xScale=d3.scale.linear()  
						.domain([
							-1.2*d3.max(csvdata,function(d){  
								return d.posX;  
							}),
							1.2*d3.max(csvdata,function(d){  
								return d.posX;  
							})])  
						.range([0,width-padding.left-padding.right]);  
		console.log(csvdata);
		  
		var yScale=d3.scale.linear()  
						.domain([
							-1.2*d3.max(csvdata,function(d){  
								return d.posY;  
							}),
							-1.2*d3.max(csvdata,function(d){  
								return d.posY;  
							})])  						
						.range([height-padding.top-padding.bottom,0]);  	
						
		var circle=svg.selectAll("circle")  
						.data(csvdata)  
						.enter()  
						.append("circle")  
						.attr("fill","black")  
						.attr("cx",function(d){ 
							//console.log(d.posX)
							return padding.left+xScale(d.posX);//设置圆心x坐标  
						})  
						.attr("cy",function(d){  
							  
							//console.log(yScale(d.cy));  
							return yScale(d.posY)+padding.bottom;  
							//调节y的值  调了好久   
							//需要与设置的y轴的坐标相对应  
						})  
						.attr("r",2);//半径  
		//定义x轴  
		var xAxis=d3.svg.axis()  
					.scale(xScale)  
					.orient("bottom");//坐标轴方向  
		//定义Y轴  
		var yAxis=d3.svg.axis()  
					.scale(yScale)  
					.orient("left");  
		  
		//添加X轴  
		svg.append("g")  
			.attr("class","axis")  
			.attr("transform","translate("+padding.left+1000+","+(height-padding.bottom)+")")  
			.call(xAxis);  
		  
		//添加y轴  
		svg.append("g")  
			.attr("class","axis")  
			.attr("transform","translate("+padding.left+1000+","+padding.top+")")  
			// .attr("transform","translate("+padding.left+(height-padding.bottom-yAxisWidth)+")")  
			.call(yAxis);  				
	}); 
		
**/
	
	</script>

</html>